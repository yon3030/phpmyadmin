<!DOCTYPE html>
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
   <meta charset="UTF-8"></meta>
   <title>Understanding Focus Appearance</title>
   <link rel="stylesheet" type="text/css" href="../../css/editors.css" class="remove"></link>
</head>
<body>
   <h1>Understanding Focus Appearance</h1>
   
    <section id="status" class="advisement">
        <h2>Status</h2>
        <p>This understanding document is part of the <a href="https://w3c.github.io/wcag/guidelines/22/"><strong>draft</strong> WCAG 2.2 content</a>. It may change or be removed before the final WCAG 2.2 is published.</p>
    </section>


   <section class="remove">
   
        <h2>Focus Appearance Success Criterion text</h2>
        <blockquote>
            <p class="conformance-level">AAA</p>
        
            <p>When the keyboard <a>focus indicator</a> is visible, an area of the focus indicator meets all the following:</p>
            <ul>
                <li>is at least as large as the area of a 2 <a>CSS pixel</a> thick <a>perimeter</a> of the unfocused component or sub-component, and</li>
                <li>has a contrast ratio of at least 3:1 between the same pixels in the focused and unfocused states</li>
            </ul>
        
            <p>Exceptions:</p>
            <ul>
                <li>The focus indicator is determined by the user agent and cannot be adjusted by the author, or</li>
                <li>The focus indicator and the indicator's background color are not modified by the author.</li>
            </ul>
            
            <p class="note">What is perceived as the user interface component or sub-component (to determine enclosure or size) depends on its visual presentation. The visual presentation includes the component's visible content, border, and component-specific background. It does not include shadow and glow effects outside the component's content, background, or border.</p>
        
            <p class="note">Examples of sub-components that may receive a focus indicator are menu items in an opened drop-down menu, or focusable cells in a grid.</p>
        
            <p class="note">Contrast calculations can be based on colors defined within the technology (such as HTML, CSS and SVG). Pixels modified by user agent resolution enhancements and anti-aliasing can be ignored.</p>

            <dl>
            <dt class="new"><dfn>focus indicator</dfn></dt>
            <dd class="new">
	            pixels that are changed to visually indicate when a user interface component is in a focused state.                		
            </dd>
            <dt class="new"><dfn>perimeter</dfn></dt>
            <dd class="new">
                continuous line forming the boundary of a shape not including shared pixels, or the minimum bounding box, whichever is shortest. For example, the perimeter calculation for a 2 CSS pixel perimeter around a rectangle is 4<em>h</em>+4<em>w</em>, where <em>h</em> is the height and <em>w</em> is the width. For a 2 CSS pixel perimeter around a circle it is 4ùúã<em>r</em>.
            </dd>
            <dt class="new"><dfn>minimum bounding box</dfn></dt>
            <dd class="new">
	            the smallest enclosing rectangle aligned to the horizontal axis within which all the points of a shape lie. For components which wrap onto multiple lines as part of a sentence or block of text (such as hypertext links), the bounding box is based on how the component would appear on a single line.              		
            </dd>
            </dl>
        </blockquote>
    </section>
   
    <section id="brief">
        <h2>In brief</h2>
        <dl>
            <dt>Objective</dt><dd>Make it easier to spot the keyboard focus</dd>
            <dt>Author task</dt><dd>Use a focus indicator of sufficient size and contrast</dd>
        </dl>

    </section>

    <section id="intent">
        
        <h2>Intent of Focus Appearance</h2>


        <p>The purpose of this Success Criterion (SC) is to ensure a keyboard focus indicator is clearly visible and discernible. Focus Appearance is closely related to <a href="https://www.w3.org/WAI/WCAG22/Understanding/focus-visible.html">2.4.7 Focus Visible</a> and <a href="https://www.w3.org/WAI/WCAG22/Understanding/non-text-contrast.html">1.4.11 Non-text Contrast</a>. Focus Visible requires that a visible focus indicator exists while a component has keyboard focus; this SC defines a minimum level of visibility. Where Non-text Contrast requires a component to have adequate contrast against the background in each of its states, this SC requires sufficient contrast for the focus indicator itself.</p>

        <p>For sighted people with mobility impairments who use a keyboard or a device that utilizes the <a href="https://www.w3.org/TR/WCAG22/#dfn-keyboard-interface">keyboard interface</a> (such as a switch or voice input), knowing the current point of focus is very important. Visible focus must also meet the needs of users with low vision, who may also rely on the keyboard.</p>
            
        <p>A keyboard focus indicator can take different forms. This Success Criterion encourages the use of a solid outline around the focused user interface component, but allows other types of indicators that are at least as large.</p>
        
        <p>This Understanding document will elaborate on:</p>
        <ol>
            <li>The minimum area requirement</li>
            <li>The change of contrast requirement</li>
            <li>Other contrast requirements imposed by related success criteria</li>
            <li>Component keyboard focus</li>
            <li>Exceptions to the criterion</li>
        </ol>

        <section id="minimum-area">
            <h3>Minimum area</h3>

            <p>The first part of the Success Criterion specifies a minimum area for the focus indicator:</p>
            
            <blockquote>
                <ul>
                    <li>is at least as large as the area of a 2 <a>CSS pixel</a> thick <a>perimeter</a> of the unfocused component or sub-component, and</li>
                </ul>
            </blockquote>
            
            <p>This only specifies a minimum area for the focus indicator. It does not require that the focus indicator literally be a 2 CSS pixel thick outline, only that the indicator be at least that large.</p>

            <p>However, the simplest way to meet the size requirement is to use a focus indicator which <em>is</em> a solid 2 CSS pixel thick perimeter.</p>
            
            <p class="note">A <a>CSS pixel</a> is what developers use in CSS declarations like ‚Äúwidth: 200px‚Äù. It is device-independent and not to be confused with device pixels which vary depending on the physical pixel density. <br />
                The rest of this document notates CSS pixels as ‚Äúpx‚Äù.
            </p>

            <section id="size-solid-outline">
                <h4>Using a solid outline</h4>

                <p>The easiest and most common way to meet this requirement is to use a solid outline around the component. The outline must be at least 2px thick. The following illustration shows a <strong>minimally</strong> sized focus indicator, where some of the white pixels making up the page background have been altered to a mid-grey, which contrast 3:1 with the original white.</p>

                <figure id="focus-indicator-basic">
                    <img src="img/focus-indicator-basic.png" alt="2 blue buttons with a dark 2 pixel thick offset focus rectangle around the second" />
                    <figcaption>Passes: A solid focus rectangle around the second of two buttons.</figcaption>
                </figure>

                <p>For non-rectangular components, the "perimeter" definition allows authors to use either of the following types of outline:</p>
                
                <ul>
                    <li>a line which solidly encloses a shape, or</li>
                    <li>a line which solidly encloses the <a>minimum bounding box</a> of a shape</li>
                </ul>
                
                <p>For example, a star-shaped button may use either a focus indicator that follows the shape of the star or a focus indicator that follows the bounding box of the star. In the following examples, the same three stars have already been selected, and focus is on the third star. The first example uses a focus indicator which matches the star shape of the focused star. The second uses a rectangular indicator.</p>

                <!-- TODO: Verify thickness -->
                <figure id="focus-outline-solid">
                    <img src="img/focus-indicator-solid-outline.svg" alt="Three of 5 stars are selected with a solid-line focus indicator in the shape of a star outlining the third" />
                    <figcaption>Passes: a solid outline indicator surrounds the third of five stars.</figcaption>
                </figure>  

                <!-- TODO: Verify thickness -->
                <figure id="focus-border-solid">
                    <img src="img/focus-indicator-solid-border.svg" alt="3 of 5 stars are selected with a solid-line rectangular focus indicator around the third" />
                    <figcaption>Passes: a solidly bound focus rectangle encloses the third of five stars.</figcaption>
                </figure>

                <p>Most solid perimeter focus indicators appear outside the component, for example by using a CSS <code>outline</code> property. However, a 2 CSS pixel thick indicator that appears inside the component against its outer edge is still considered to be a perimeter and does meet the minimum size requirement. Indicators that are inset further within the component and not directly against the outer edge would need to be thicker than 2 CSS pixels to meet the minimum size requirement.</p>
                
                <!-- TODO: Create img -->
                <figure id="focus-offsets">
                    <img src="img/focus-indicator-offsets.svg" alt="5 example buttons side-by-side, with the same 2px thick focus indicator respectively offset outside the component, adjacent outside the component, overlapping the edge of the component, adjacent inside the component, and inset inside the component" />
                    <figcaption>The first four of these focus indicators all meet the minimum size requirement. The last one does not; it needs to be thicker.</figcaption>
                </figure>

                <p>Note that different color contrast requirements apply depending on whether the focus indicator is inside or outside the component. See the <a href="#contrast">Color Contrast</a> section below.</p>
            </section>
            <section id="size-dashed-dotted">
                <h4>Using a dashed or dotted outline</h4>

                <p>Outlines that are not solid lines, like dashed or dotted outlines, can be used to meet the size requirement but are not recommended.</p>

                <p>In order to meet the minimum size requirements consistently, a dashed or dotted outline must be much thicker than an equivalent solid outline would be.</p>

                <!-- TODO: update thickness of diagram -->
                <figure id="focus-indicator-weak-dashed">
                    <img src="img/focus-indicator-weak-dashed-border.svg" alt="3 of 5 stars are selected with the whole third star outlined with a 2 pixel thick dashed line" />
                    <figcaption>Fails: the dashed outline is only 2 CSS pixels thick and does not meet the size requirements of the focus area calculation.</figcaption>
                </figure>

                <p>Different user agents use different rules for rendering dotted and dashed outlines. A focus indicator which passes in one user agent might fail in a different user agent.</p>

                <!-- TODO: delete old diagram (focus-indicator-strong-dashed-border) -->
                <!-- TODO: create new diagram -->
                <figure id="focus-indicator-strong-dashed-long-dashes">
                    <img src="img/focus-indicator-strong-dashed-border-long-dashes.svg" alt="3 of 5 stars are selected with the whole third star outlined with a 5 pixel thick dashed line, using 3 pixel thick dashes with 2 pixels of spacing" />
                    <figcaption>Passes: the thicker dashed outline meets the size requirements of the focus area calculation.</figcaption>
                </figure>

                <!-- TODO: create new diagram -->
                <figure id="focus-indicator-strong-dashed-short-dashes">
                    <img src="img/focus-indicator-strong-dashed-border-short-dashes.svg" alt="3 of 5 stars are selected with the whole third star outlined with a 5 pixel thick dashed line, using 2 pixel thick dashes with 3 pixels of spacing" />
                    <figcaption>Fails: the dashed outline is defined by the same CSS as in the passing previous example, but is rendered in a different user agent which uses shorter dashes and no longer meets the minimum size requirements.</figcaption>
                </figure>

                <p>Dashed and dotted indicators are often subject to anti-aliasing during rendering; see the <a href="#size-anti-aliasing">Anti-aliasing</a> section below.</p>
            </section>
            <section id="size-other-indicator-shapes">
                <h4>Other indicator shapes</h4>

                <p>This Success Criterion does not require that focus indicators be outlines. Other shapes may be used so long as they meet the minimum size requirement.</p>

                <p>In this example, the entire background of the component changes color when it receives focus. This easily meets the minimum required area of the change. However, note that this technique requires especially careful attention to color contrast; the change contrast between the focused and unfocused background colors must be at least 3:1 to meet the second part of this success criterion, and additionally the the text of the button must meet 1.4.3 and/or 1.4.6 in <em>both</em> the focused and unfocused states.</p>

                <!-- TODO: check how you're supposed to reference 1.4.3/1.4.6 in above -->
                <!-- TODO: Add diagram -->

                <p>In this example, 

            </section>
            <section id="size-anti-aliasing">

                <h4>Anti-aliasing and user agent resolution enhancements</h4>

                <p>The Success Criterion allows authors to ignore <q>pixels modified by user agent resolution enhancements and anti-aliasing</q> when making color contrast determinations. For the purposes of calculating the size of the part of an indicator that meets color contrast requirements, this means that authors may either:</p>

                <ul>
                    <li>Omit any anti-aliased pixels from their size calculation, or</li>
                    <li>Calculate the size of the indicator as if it were rendered at a higher fidelity without anti-aliasing.</li>
                </ul>

                <p>In the following example, the focus indicator is a dashed outline where each dash is 3px wide, but the dashes are separated by a non-whole-number of pixels and rendered using anti-aliasing. Most individual dashes consist of a 2px wide segment of the specified indicator color with 1px wide end segments of a blended, aliased color. Authors may calculate the size of such an indicator as if it consisted of 3px wide segments of the non-aliased color.</p>

                <!-- TODO: insert example figure -->

                <p>In the following example, the component being focused is a star-shaped button. Its minimum bounding box is 32px by 32px, and its perimeter is longer than this, so the minimum required indicator size is <pre>4*(w+h) = 256px^2</pre>. Its focus indicator is a 2px thick ring with inner radius 20px rendered around a star icon button. The ring is specified to use color #000000, but many of the individual pixels of the circle are anti-aliased. A pixel-by-pixel analysis might find that only 204 individual pixels meet contrast requirements, not meeting the minimum size requirement &mdash; the exact pixel count will vary between different user agents, screen resolutions, and zoom settings. Authors may instead ignore anti-aliasing and calculate the size of this ring as <pre>œÄ*r_outer^2 - œÄ*r_inner^2</pre>, which in this example is approximately 263px^2 and does meet the minimum size requirement.</p>

                <!-- TODO: insert example figure -->
            </section>
        </section>

        <section id="change-of-contrast">

            <h3>Change of contrast</h3>

            <p>The second part of the Success Criterion's indicator requirements states that an area of the indicator:
                
            <blockquote>
                <ul>
                    <li>has a contrast ratio of at least 3:1 between the same pixels in the focused and unfocused states</li>
                </ul>
            </blockquote>
            
            This requirement measures the change of contrast between the same pixels in different states. This is different from the Text Contrast and Non-text Contrast Success Criteria, which measure the contrast between different adjacent pixels in a single state at a time.

            The greater the change of contrast between states, the easier it is for users to see it. Authors are encouraged to make the change of color contrast as great as possible.

            The following illustration shows a <strong>minimally</strong> contrasting focus indicator, where some of the white pixels making up the page background have been altered to a mid-grey, which contrast 3:1 with the original white. Authors are encouraged to exceed the minimum focus appearance. For instance, the dark blue lines in the first two illustrations are much more visible.</p>

            <figure id="focus-indicator-star-with-light-focus">
                <img src="img/focus-indicator-star-with-light-focus.svg" alt="Two orange-yellow five-pointed stars, one with a mid-gray focus rectangle" />
                <figcaption> Passes: Two buttons in the shape of a star, with the second surrounded by a focus indicator whose pixels contrast 3:1 between focused (light grey) and unfocused (white) states.</figcaption>
            </figure>

            <p>When a component changes to include a focus indicator, that change can be measured as a change of color contrast. For example, if a yellow outline is added to a button on a blue background, the change of color is from blue to yellow. This change can be measured whether the focus indicator is on the background around the component, or the background within the component.</p>
                        
            <figure id="focus-indicator-innerline-2">
                <img src="img/focus-indicator-innerline.png" alt="Three dark blue buttons on a white background. The middle button has a yellow inner border." width="284" />
                <figcaption> Passes: adding a yellow outline to a link is a change of color from blue to yellow. That change has a contrast ratio of 12:1.</figcaption>
            </figure>

            <p>If a control receiving focus changes its background (fill color) to a color that contrasts less than 3:1 with the original background, that would not pass the change of contrast.</p>

            <figure id="focus-indicator-background">
                <img src="img/focus-indicator-background.png" alt="Three black buttons with a dark background. The middle button has a dark grey background." width="250" />
                <figcaption> Fails: the second link has a dark-grey (#555) which <strong>fails</strong> this Success Criterion because the change from black-background to dark-grey background does not meet 3:1.</figcaption>
            </figure>
            <p>If the background change is sufficient, it is a method of passing the criterion.</p>
            <figure id="focus-indicator-background-passing">
                <img src="img/focus-indicator-background-passing.png" alt="Three black buttons with a dark border and two have a dark background. The middle button has a white background." width="250" />
                <figcaption> Passes: the second link has a white background (#fff) which <strong>passes</strong> this Success Criterion because the change from black-background to white-background meets 3:1.</figcaption>
            </figure>

            <p>It is not necessary for the entire focus indicator to have a 3:1 change of contrast. It is sufficient for just a part of the indicator to meet the change of contrast requirement, so long as the contrasting part of the indicator meets the minimum area requirement.</p>

            <!-- TODO: add figure -->
            <figure id="focus-indicator-two-color-thick">
                <img src="img/focus-indicator-two-color-pass.png" alt="A button whose focus indicator is two nested outlines: an inner 2px thick black outline with high contrast against the background, and an outer 2px thick light gray outline with low contrast" />
                <figcaption>Passes: The inner part of the indicator meets the minimum area and change of contrast requirements on its own, so it is not necessary for the outer part of the indicator to have a 3:1 change of contrast.</figcaption>
            </figure>

            <!-- TODO: add figure -->
            <figure id="focus-indicator-two-color-thick">
                <img src="img/focus-indicator-two-color-fail.png" alt="A button whose focus indicator is two nested outlines: an inner 1px thick black outline with high contrast against the background, and an outer 1px thick light gray outline with low contrast" />
                <figcaption>Fails: The inner part of the indicator has sufficient change of contrast, but the outer part does not. Only the inner part can be considered, and it does not meet the minimum area requirement on its own because it is only 1px thick.</figcaption>
            </figure>

            <p>It is possible to use visual patterns such as strips switching places to disguise a change of focus indicator. This is not considered a visible indicator.</p>
        </section>

        <section id="relationship-with-non-text-contrast">
            <h3>Relationship with Non-text Contrast</h3>

            <p>Focus indicators are visual information required to identify a state of a user interface component. That means that they are subject to <a>1.4.11 Non-text Contrast</a>, in addition to 2.4.13 Focus Appearance.</p>

            <p>In combination with <a href="focus-visible">2.4.7 Focus Visible</a>, <a href="non-text-contrast" class="sc">1.4.11 Non-text Contrast</a> requires that the visual focus indicator for a component must have sufficient contrast against the adjacent colors when the component is focused, except where the appearance of the component is determined by the user agent and not modified by the author.</p>
                    
            <p>The difference between the contrast requirements in Focus Appearance and Non-text Contrast is:</p>

            <ul>
                <li>Focus Appearance requires that focus indicators have a <em>change of contrast</em> between focused and non-focused states.</li>
                <li>Non-text Contrast requires that focus indicators have <em>adjacent contrast</em> between the indicator (in the focused state) and adjacent non-indicator colors.</li>
            </ul>
            
            <!-- TODO: make both of these figures -->
            <figure id="non-text-contrast-fail-focus-apperance-pass">
                <img src="img/non-text-contrast-fail-focus-apperance-pass.png" alt="A light blue button with a 2px thick border. The border is black in the unfocused state and light gray in the focused state." width="400" />
                <figcaption>This example passes Focus Appearance but fails Non-text Contrast; there is insufficient <em>adjacent contrast</em> between the focus indicator and the adjacent colors.</figcaption>
            </figure>

            <figure id="non-text-contrast-pass-focus-apperance-fail">
                <img src="img/non-text-contrast-pass-focus-apperance-fail.png" alt="A light blue button with a 2px thick border. The border is black in the unfocused state and dark gray in the focused state." width="400" />
                <figcaption>This example passes Non-text Contrast but fails Focus Appearance; there is insufficient <em>change of contrast</em> between the focused and unfocused states.</figcaption>
            </figure>

            <p>Additionally, Non-text Contrast does not establish any size requirement and has slightly different rules for when exceptions are allowed.</p>

            <p>See the Relationship with Focus Visible section of <a href="https://www.w3.org/WAI/WCAG22/Understanding/non-text-contrast.html">Understanding 1.4.11 Non-text Contrast</a> for more details and examples.</p>
        </section>

        <section id="keyboard-focus">
            <h3>Component keyboard focus</h3>
            <p>The preamble to this SC is "When a user interface component has keyboard focus..." The <em>keyboard focus</em> is the point of interaction for someone using a keyboard. For environments with a keyboard-operable interface, the keyboard focus can be moved around the interface in order to interact with different components. Whichever component is being interacted with has focus.</p>

            <p>WCAG defines <em>user interface component</em> as "a part of the content that is perceived by users as a single control for a distinct function." Because different users may perceive controls differently, there is a potential for some variation when interpreting what constitutes both a <em>single control</em> and a <em>distinct function</em>. This is particularly the case when something visually presents in a way that may differ from how it is programmatically created under the covers. Where there is not a native HTML component upon which to base designs, there can be great variations in how the components and their focus indicators are portrayed. Further, some components have sub-components that can take focus, such as the menu items on a menu.</p>

            <p>Nonetheless, consistent results from different testers were obtained for this SC by using the focus indicator itself as the gauge of what constitutes the component being interacted with. For complex components, the three typical focus indicators are as follows:</p>

            <ul>
                <li>Focus indicator around only the whole component</li>
                <li>Focus indicators around both the component and subcomponent</li>
                <li>Focus indicator around only the subcomponent</li>
            </ul>
        
            <p>Each of these will be discussed, using a tablist as a familiar complex component.</p>
                
            <h4>Focus indicator around only the whole component</h4>
            <figure id="component-complex-whole">
                <img src="img/component-complex-whole.png" alt="Three tab buttons shown with a dark blue rectangle around all three tab buttons." />
                <figcaption> A tablist with a focus indicator around only the whole.</figcaption>
            </figure>    
            
            <p>When the focus indicator is shown only around the whole tablist, the user is guided to considering the tablist as a single user component. The tab items within it are visually distinguished between selected and unselected states (and visual indicators of selection state must meet the criteria given in <a href="https://www.w3.org/WAI/WCAG22/Understanding/non-text-contrast.html">1.4.11 Non-text Contrast</a>).</p>
        
            <p>Having a focus indicator <em>only</em> around the whole is possible where there is no need to have a selected sub-component while another sub-component has focus. For a tablist which synchronizes its tab panel content with whatever tab is active, only one tab item can be selected at a time, and since whatever tab is selected is considered active, a separate focus indicator is redundant.</p>
            
            <p>Result: the group focus indicator must meet the requirements of this SC.</p>
        
            <p>A <a href="https://codesandbox.io/s/practical-cori-nl4pld?file=/index.html">radio button group</a> and a <a href="https://www.w3.org/WAI/ARIA/apg/example-index/slider/slider-rating.html">star-rating widget</a>, which each use only a whole-component focus indicator, provide working examples of different complex components that pass the primary requirements of this SC. In the star ratings example, users can increment the rating by 1/2 stars. Not only is a focus indicator for each 1/2 star unnecessary, but it would actually be difficult to achieve without making the interaction confusing.</p>

            <h4>Focus indicators around both the component and subcomponent</h4>
            
            <figure id="component-complex-both">
                <img src="img/component-complex-both.png" alt="Three tab buttons shown with a dark blue rectangle around all three tab buttons, the first tab button also has a dark outline as well as a blue bar indicating it is selected." />
                <br />
                <img src="img/component-complex-both-unselected.png" alt="The same tab list showing except the first tab is selected, but the second has the focus outline." />
                <figcaption> The same tablist in two states. In the first, focus is around both the tablist and the currently selected tab; in the second, focus is around both the tablist and an unselected tab.</figcaption>
            </figure>    
        
            <p>For a tablist which does not keep its tab panel content synchronized with whatever tab is selected, there needs to be a focus indicator for the tab item subcomponent. This is because the tab item with focus may be different than the selected item.</p>
            <p>The user can navigate to the tablist, which in this implementation has a focus rectangle around the whole tablist as well as one around a tab item (conventionally the item that is currently selected). The focus around the whole is helpful in cueing a keyboard user that this is a complex component that has its own interaction. The user can then move focus between the unselected and selected tab items -- each of which in turn has its own focus indicator -- before activating one, which then makes it selected as well as focused, and updates the tab panel to match.</p>
            <p>In this scenario, either the group focus indicator or the sub-component indicator must meet the requirements of this Success Criterion. To avoid being overly prescriptive, the Success Criterion allows authors to choose which makes the most sense. Generally, if a sub-component focus is necessary, it should be assessed instead of the group indicator.</p>
        
            <p>Result: the focus indicator for the tab item meets the requirements of this SC. The tablist focus indicator does not need to meet the requirements.</p>

            <p>A <a href="https://www.w3.org/WAI/ARIA/apg/example-index/slider/slider-color-viewer.html">slider to pick colors</a> provides a working example of a different complex component that predominantly shows focus for the subcomponent. In this case, the thumb slider sub-component has a focus indicator of sufficient size and contrast to pass the sufficient area calculation. There is also a subtle focus around the whole slider component, but it does not need to be assessed to pass this SC.</p>
        
            <h4>Focus indicator around only the subcomponent</h4>
        
            <figure id="component-complex-sub">
                <img src="img/component-complex-sub.png" alt="Three tab buttons shown and the first button has a dark outline." />
                <figcaption> The same tabs as in the prior set, but the focus indicator around the whole is removed.</figcaption>
            </figure>   
        
            <p>The same unsynchronized tablist can also be implemented as something which only shows focus on the tab items and not on the whole. The behaviour is the same as in the prior example, but there is never a focus indicator placed around the tablist. This interaction is acceptable, but it is not best practice since it demands more understanding from the user with less information. For example, some visual cues for the tablist and tab items (and tab panel) may not be clear. As well, keyboard users may not initially understand the expected keyboard interaction.</p>
        
            <p>Result: the focus indicator for the tab item must meet the requirements of this SC, judging focus with both selected and unselected tab items.</p>

            <p>A <a href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA/Roles/tab_role#example"> functional example of sub-component-only tab focus</a> has an indicator that is large enough (at least four times the shortest side) with sufficient contrast to pass the focus area language of this SC.</p>
        
            <h4>Where something with focus is not a user interface component</h4>
            <p>Some pages contain very large editing regions, such as web implementations of word processors and code editors. Unlike a <code>textarea</code> element, which is a user interface component, these large editing regions do not typically meet the definition of <a href="https://w3c.github.io/wcag/guidelines/22/#dfn-user-interface-components">user interface components</a>; they are not "perceived by users as a single control for a distinct function." Providing focus indicators around such editing regions may still be beneficial to some; however, where the region is not perceived as a single control, it is not covered by this Success Criterion. The web page will still need to provide a insertion point (caret indicator) in such editing regions in order to meet the requirements of <a href="https://www.w3.org/WAI/WCAG22/Understanding/focus-visible.html">2.4.7 Focus Visible</a>.</p>

            <p>Some non-operable elements can take focus (such as a heading element that is the target of a skip link). However, the preamble of this SC refers to user interface components; it is only when the element with focus is operable by keyboard that this Success Criterion applies.</p>
        </section>

        <section id="exceptions">
            <h3>Exceptions</h3>
                <p>There are two situations where the focus appearance does not need to be assessed:</p>
            <ul>
                <li>the focus indicator cannot be adjusted by the author</li>
                <li>the author has not modified the effects of the user agent default</li>
            </ul>
        
            <section id="exception-cannot-adjust">
                <h4>First exception: the focus indicator cannot be adjusted by the author</h4>

                <blockquote><p>The focus indicator is determined by the user agent and cannot be adjusted by the author</p></blockquote>
                <p>Some components or technologies may not allow the author to adjust the focus indicator. This is the case with HTML <code>select</code> elements (both single and multi-select), where the visual treatments for selection and focus cannot be adjusted by the author. In this case the Success Criterion does not apply.</p>
                <figure id="country-select">
                    <img src="img/focus-indicator-select.png" alt="A country select element with Afghanistan selected and Albani with focus" />
                    <figcaption>Passes: The user agent's default <code>select</code> element presentation cannot be modified by the author, so it passes regardless of the quality of the focus indicator</figcaption>
                </figure>  
            
            </section>
            <section id="exception-default">
                <h4>Second exception: the default indicator and background are not modified</h4>
                <blockquote><p>The focus indicator and the indicator's background color are not modified by the author</p></blockquote>
                <p>If the focus indicator and the background behind the focus indicator are not modified by the author, the Success Criterion does not apply.</p>
                <p>The intent of this exception is to reduce burden on authors by allowing them to rely on the default indicators provided by user agents (browsers). If all user agents provided good focus indicators, authors would be able to concentrate efforts on other accessibility considerations. Unfortunately, browser default focus indicators vary by component, browser, and across devices and operating systems, and the default focus indicators in some browsers can be difficult to see (such as a 1px dotted outline). For this reason, most authors override browser defaults in order to overcome these deficiencies and create a more uniform user experience, regardless of browser.</p>
                <p>Some browser makers are improving their default focus indicators to make them more visible. As more browsers adopt defaults that meet the primary bullets of this SC, authors will be able to achieve improved focus indicators without customization.</p>

                <h4>Modifying the focus indicator background</h4>
                <p>Browser default focus indicators can be made <em>more</em> difficult to see if the author modifies the pixels directly adjacent to the indicator (commonly referred to as its background), such as by positioning a component on top of an image or gradient background, or altering the page's default white background color, for instance using a blue background in combination with a browser's blue default indicator. For this reason, where the author alters the pixels directly adjacent to the default focus indicator, the user agent exception does not apply, and the author will need to verify they meet the size and contrast requirements of this Success Criterion.</p>
                <p class="note">Altering the <code>body</code> element's <code>background-color</code> attribute <em>is</em> one way of altering the pixels directly adjacent to the indicator in most implementations. However, specifying a value of white (<code>#FFFFFF</code>) does not nullify this exception since, as established in the third note of the <a href="https://www.w3.org/TR/WCAG22/#dfn-contrast-ratio">contrast ratio definition</a>, the default ("unspecified") color is assumed to be white.</p>
                
                    <p>[Future image set: a button with a default light blue focus indicator on a white page; the same button and focus indicator on a light blue page background]</p>

                <p>As well, if the browser provides an indicator <em>within</em> a component by default, then authors can potentially reduce the visibility by changing the component color (which in such a scenario is the background color for the focus indicator). For example, if the default indicator on a button is a bright yellow inner focus rectangle, the authors can negatively affect the focus appearance by making the button yellow or orange. For this reason, this user agent exception can only be met if the author both does not modify the default focus indicator <em>and</em> does not modify its background.</p>

                
                <p>[Future image set: a button with a default internal focus indicator; the same button, now with a colour similar to the default internal focus indicator]</p>
            </section>
        </section>
    </section>

    <section id="benefits">
        <h2>Benefits of Focus Visible</h2>
        
        <ul>
            <li>This Success Criterion helps anyone who relies on the keyboard to operate the page, by letting them visually determine the component on which keyboard operations will interact at any point in time.</li>
            <li>People with attention limitations, short term memory limitations, or limitations in executive processes benefit by being able to discover where the focus is located.</li>
        </ul>
    
    </section>

    <section id="examples">
        <h2>Examples of Focus Visible</h2>

        <ul>
            <li>When links receive focus, an outline is displayed around the link that contrasts with the background adjacent to the link.</li>
            <li>When buttons receive focus, an outline is displayed within the button (around the text) that contrasts with the button's background.</li>
            <li>When text fields receive focus, an outline is displayed around the field, indicating that the input has focus.</li>  
            <li>When radio buttons receive focus, an outline is displayed around the control, indicating that the input has focus.</li>        
        </ul>
        
    </section>

    <section id="resources">
        <h2>Resources</h2>
        <ul>
            <li><a href="https://www.sarasoueidan.com/blog/focus-indicators/">A guide to designing accessible focus indicators</a> by Sara Soueidan</li>
            <li><a href="https://alastairc.uk/tests/wcag22-examples/focus-more-visible-3.html">Focus appearance - testing version 3</a></li>
            <li><a href="https://alastairc.uk/tests/wcag22-examples/focus-more-visible-6.html">Focus visible testing (Feb 2022)</a></li>
            <li><a href="https://adrianroselli.com/2017/02/avoid-default-browser-focus-styles.html">Avoid Default Browser Focus Styles</a> by Adrian Roselli</li>
            </ul>
    </section>

    <section id="techniques">
        <h2>Techniques for Focus Appearance</h2>
        
        
        <section id="sufficient">
            <h3>Sufficient Techniques</h3>
            
            
            <ol>
                <li>
                    <a href="https://www.w3.org/WAI/WCAG21/Techniques/general/G195" class="general">Using an author-supplied, highly visible focus indicator</a>
                </li>
                <li>
                <a href="../../techniques/css/C40">Creating a two-color focus indicator to ensure sufficient contrast</a>
                </li>
                <li>
                    <a href="../../techniques/css/C41">Creating a contrasting focus indicator inside the component</a>
                </li>
            </ol>
            
        </section>
    
        <section id="advisory">
            <h3>Additional Techniques (Advisory)</h3>
            
        </section>
    
        <section id="failure">
            <h3>Failures</h3>
            <ol>
                <li>
                    Using a CSS border for inline text which can wrap (Potential future technique)
                </li>
            </ol>
        </section>
    
    </section>
</body>
</html>
